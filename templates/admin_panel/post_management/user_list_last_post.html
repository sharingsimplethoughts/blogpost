{% load staticfiles %}

{% include 'admin_panel/header.html' %}


<link rel="stylesheet" href="{% static 'css/daterangepicker.min.css' %}">


<script src="{% static 'js/daterangepicker.min.js' %}"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<style type="text/css">
  
.add-membrs{
    position: relative;
}
.add-membrs h5{
text-decoration: underline;
}
.add-membrs ul{
list-style: none;
padding-left: 0px;
}
.add-membrs ul li{
    padding-bottom: 5px;
    width: 49%;
    display: inline-block;
}
.add-membrs .container_check{
   /* display:block;*/
    position:relative;
    float: right;
    padding-top:5px;
    font-size:13px;
    padding-left:35px;
    margin-bottom:12px;
    cursor:pointer;
    -webkit-user-select:none;
    -moz-user-select:none;
    -ms-user-select:none;
    user-select:none;
    margin-right:10px
}
.add-membrs .container_check input{
    position:absolute;
    opacity:0;
   der:1px solid transparent*/
    border: 1px solid #2c3e50;
}
.add-membrs .container_check input:checked ~ .checkmark{
    background-color: #2c3e50;
    border:1px solid transparent;
}
.add-membrs .container_check .checkmark:after{
    conten cursor:pointer;
}
.add-membrs .container_check .checkmark{
    position:absolute;
    top: 6px;
    left: 0;
    height: 16px;
    width: 16px;
    border:1px solid #2c3e50;
    -webkit-border-radius:3px;
    -moz-border-radius:3px;
    -ms-border-radius:3px;
    border-radius:3px;
    -webkit-transition:all 0.2s ease;
    transition:all 0.2s ease;
}
.add-membrs .container_check .checkmark:after {
    content: "";
    position: absolute;
    display: block;
    left: 4px;
    top: 2px;
    width: 5px;
    height: 10px;
    border: solid white;
    border-width: 0 3px 3px 0;
    -webkit-transform: rotate(45deg);
    -ms-transform: rotate(45deg);
    transform: rotate(45deg);
}

/* Date Picker
========================*/

  .datepicker.dropdown-menu {
     width: 237px;
    padding: 1.07143em 1.78571em;
    -webkit-box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.2);
    box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.2);
    right: 0 !important;
    }
  .datepicker tbody {
    color: #666; }
  .datepicker table tr td span.active,
  .datepicker table tr td span.active:hover,
  .datepicker td .month.active {
    background: #1976d2 !important; }
  .datepicker td.active,
  .datepicker td.selected {
    background: #1976d2 !important; }
    .default input[type=text] {
    border: 1px solid #cad6e2;
      border-radius: 5px;
    }
    .default .input-group {
      width: 100%;
      display: block !important;
      height: 30px;
    }
    .default label {
      /*padding: 5px 9px 0px 0px;*/
    }
    .dafault21 {
    /* width: 28%; */
    /* width: 42%; */
    width: 33%;
    height: 20px;
    margin-right: 13px;
    display: inline-block;
}
.default{
    position: relative;
    padding-bottom: 53px;
}
.filter{
    position: relative;
    float: right;
    font-size: 18px;
    font-weight: 400;
/*    border: 1px solid #ddd;
    padding: 0px 27px;*/
}
.fil-cont{
    position: relative;
}
.fil-cont h5{
    padding: 0px;
    margin: 8px 0 5px;
}
.fil-cont ul{
padding-left: 0px;
list-style: none;
margin-top: 0;
}
.fil-cont ul li{
display: inline-block;
width: 30%;
}
.fil-list-grp{
    position: relative;
    padding: 3px 15px 0px !important;
}
.fil-list-grp:hover{
background-color: transparent !important;
    
}
.inactive{
color:#2c3e50 !important;
}

<!-- css loader-->

.overlay {
  background-color: rgba(0,0,0,0.5);
  position: relative;
  height: 100vh;
  width: 100vw;
}

.loader {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%,-50%);
  width: 60px;
  height: 60px;
  border-radius: 50%;
  border: 4px solid #182838;
  border-right-color: transparent;
  transform-origin: center;
  animation: rotate 1s linear infinite;
}

@keyframes rotate {
  from {
    transform: rotate(0);
  }
  to {
    transform: rotate(360deg);
  }
}

</style>

<!--<div class="blurredElement"></div>-->

      <div class="userPosts"></div>
<!--    <div class="overlay">-->
<!--          <div class="loader"></div>-->
<!--        </div>-->
        <div class="layout-content  ">
            <div class="layout-content-body">
                <div class="title-bar">
                    <h4>
                      <ul class="breadcrumb">
                        <li><i class="fa fa-home "></i><a class ="inactive" href="/admin/panel/home/"> Home</a></li>
                        <li class="active">Post Management</li>
                      </ul>
                    </h4>
                </div>

                <div class="row gutter-xs">
                    <div class="col-xs-12">
                        <div class="card">
                            <div class="card-header" style="display: none">
                              <div class="card-actions">
                                  <button type="button" class="card-action card-reload" title="Reload"></button>
                              </div>
                            </div>

                            <div class="card-body">

                              <div class="row" style="position: relative;">

                 <div class="col-md-12 col-sm-12 col-xs-12" style="position: absolute; top:-0.5%;  z-index: 999; width: 70%; float: left;">

                        <form method = "POST" id= filter_date action="/admin/panel/post_management"
                                       >{% csrf_token %}
                            <div class="col-sm-3">
                          <div class="">
                            <div class="form-group">
                              <div class="input-group">
                                <input  autocomplete="off" type="text" class="form-control datepicker" value="startdate" id="startdate" style="padding: 0 10px 0 25px; border-radius: 0;" name='startdate' placeholder="From">
                                <span class="icon icon-calendar input-icon" style="width: 25px;"></span>
                                <div class="input-group-append">
                                  <div class="input-group-text ml-2">
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                            </div>
                            <div class="col-sm-3">
                          <div class=" tb-to">
                            <div class="form-group">
                                <div class="input-group">
                                    <input type="text" autocomplete="off" class="form-control datepicker" value="enddate" id="enddate" style="padding: 0 10px 0 25px; border-radius: 0;" name='enddate' placeholder="To">
                                    <span class="icon icon-calendar input-icon" style="width: 25px;"></span>
                                    <div class="input-group-append">
                                        <div class="input-group-text ml-2">
                                        </div>
                                    </div>
                                </div>
                            </div>
                          </div>

                        </div>
                        <div class="col-sm-1">
                          <button  style= "width:40px;height: 34px ;margin-top:0px" class="btn btn-default btn-sm btn-labeled" id ="filter-user" type="submit" data-toggle="modal" disabled="disabled">
                            <span class="add-btn">
                            <i class="fa fa-search"></i>
                            </span>
                          </button>
                        </div>

                          <div class="col-sm-3">
                            <select class="form-control sort_user"  onchange="this.form.submit()" name="sort_by" id ="sort_user">

                              <option id ="sort-1" value="default" selected="True">Default</option>
                              <option id ="sort-2" value="first_name" >A-Z</option>
                              <option id ="sort-3" value="-first_name">Z-A</option>

                            </select>

                          </div>


                     </form>
                      </div>
                      </div>

                              <div class="table-responsive col-md-12 col-sm-12 col-xs-12">
                                <table id="demo-datatables-5" class="table table-striped table-bordered table-nowrap dataTable" cellspacing="0" width="100%">
                                    <thead>
                                       <tr>
                                            <th class="clicksr">Sr. No.</th>
                                            <th>First name</th>
                                            <th>Last name</th>
                                            <th>Email-ID</th>
                                            <th>Mobile</th>
                                            <th>Latest post time</th>
<!--                                            <th>Post count</th>-->
                                            <th>Action</th>

                                        </tr>
                                    </thead>

                                    <tbody id = 'userlist'>

                                      {% for user in users %}
                                        <tr id = 'usertr'>
                                            <td>{{forloop.counter}}</td>
                                            <td>{{user.first_name}}</td>
                                            <td>{{user.last_name}}</td>
                                            <td>{{user.email}}</td>
                                            <td>{{user.country_code}}-{{user.mobile_number}}</td>
                                            <td>{{user.last_post_created|date:"d M Y , g:i a"}}</td>
<!--                                            <td>{{user.post_count}}</td>-->

                                            <td>
                                                <button class="btn btn-primary btn-sm btn-labeled" type="button" onClick="location='/admin/panel/user_posts/{{ user.id }}'">
                                                    <span class="btn-label">
                                                     <span class="icon icon-eye icon-lg icon-fw"></span>
                                                    </span>
                                                    View Posts
                                                </button>
                                            </td>
                                        </tr>

                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                            </div>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

{% include 'admin_panel/footer.html' %}
<script>


 jQuery('.card-reload').click();


</script>

<script type="text/javascript">
         $(document).ready(function(){
            $("#startdate").datepicker({
                todayBtn:  1,
                autoclose: true,
            }).on('changeDate', function (selected) {
                var minDate = new Date(selected.date.valueOf());
                $('#enddate').datepicker('setStartDate', minDate);
            });

            $("#enddate").datepicker({
                todayBtn:  1,
                autoclose: true,
            }).on('changeDate', function (selected) {
                 var maxDate = new Date(selected.date.valueOf());
                 $('#startdate').datepicker('setEndDate', maxDate);
            });
        });
 

</script>



<script type="text/javascript">

$(document).ready(function(){

$(".clicksr").click();

$('#filter_date').change(function() {

    if ($('#startdate').val() != '' && $('#enddate').val() != '' ){
      

      $('#filter-user').prop('disabled', false);

            }
      else{

        $('#filter-user').prop('disabled', true);
      }

})
})


</script>

<script>


$('#sort_user').val("{{sort_by}}");

$('#startdate').val("{{startdate}}");
$('#enddate').val("{{enddate}}");
if ("{{startdate}}" && "{{enddate}}"){
    $('#filter-user').prop('disabled', false);
    $('#enddate').datepicker('setStartDate', "{{startdate}}");
     $('#startdate').datepicker('setEndDate', "{{enddate}}");

}
</script>



